<div class="container">
  <div class="grid">
    <div class="col-3">
      <h1>Introduzca monedas</h1>
      <div class="coins-panel">
        @for (coin of coins(); track coin) {
        <p-button (click)="addCoin(1, coin)" [rounded]="true" severity="info">
          {{ coin | currency : 'EUR' }}
        </p-button>
        }
      </div>

      <div class="balance-section">
        <h2>Saldo: {{ machineService.getBalance(1) | currency : 'EUR' }}</h2>
        <p-button (click)="returnMoney(1)" label="Devolver" severity="success" />
      </div>
      <p-table [value]="productsDrinks()" [tableStyle]="{ 'min-width': '5rem' }">
        <ng-template pTemplate="header">
          <h2>Bebidas</h2>
          <tr>
            <th>Producto</th>
            <th>Precio</th>
            <th>Stock</th>
            <th>Acción</th>
          </tr>
        </ng-template>

        <ng-template pTemplate="body" let-product>
          <tr>
            <td>{{ product.name }}</td>

            <td>{{ product.price | currency : 'EUR' }}</td>

            <td>{{ product.stock }}</td>

            <td>
              <p-button
                label="Seleccionar"
                icon="pi pi-shopping-cart"
                severity="success"
                [disabled]="product.stock === 0"
                (click)="selectProduct(1, product)"
              >
              </p-button>
            </td>
          </tr>
        </ng-template>
      </p-table>
      <div class="result-section-drinks">
        <h2>Cambio: {{ machineService.getChange(1) | currency : 'EUR' }}</h2>

        @if (machineService.getChange(1) > 0) {
        <p-button (click)="returnMoney(1)" label="Recojer" severity="success" />
        }
      </div>
      <div class="col-6">
        @if (getProductsCollectById(1).length > 0) {
        <p-table [value]="getProductsCollectById(1)">
          <ng-template #header>
            <tr>
              <th>Producto</th>
              <th>Cantidad</th>
            </tr>
          </ng-template>
          <ng-template #body let-product>
            <tr>
              <td>{{ product.name }}</td>
              <td>{{ product.amount }}</td>
            </tr>
          </ng-template>
        </p-table>
        <p-button (click)="collectProduct(1)" label="Recojer" severity="success" />
        }
      </div>
    </div>

    <div class="col-3">
      <h1>Introduzca monedas</h1>
      <div class="coins-panel">
        @for (coin of coins(); track coin) {
        <p-button (click)="addCoin(2, coin)" [rounded]="true" severity="info">
          {{ coin | currency : 'EUR' }}
        </p-button>
        }
      </div>

      <div class="balance-section">
        <h2>Saldo: {{ machineService.getBalance(2) | currency : 'EUR' }}</h2>
        <p-button (click)="returnMoney(2)" label="Devolver" severity="success" />
      </div>
      <p-table [value]="productsSnacks()" [tableStyle]="{ 'min-width': '5rem' }">
        <ng-template pTemplate="header">
          <h2>Comida</h2>
          <tr>
            <th>Producto</th>
            <th>Precio</th>
            <th>Stock</th>
            <th>Acción</th>
          </tr>
        </ng-template>

        <ng-template pTemplate="body" let-product>
          <tr>
            <td>{{ product.name }}</td>

            <td>{{ product.price | currency : 'EUR' }}</td>

            <td>{{ product.stock }}</td>

            <td>
              <p-button
                label="Seleccionar"
                icon="pi pi-shopping-cart"
                severity="success"
                [disabled]="product.stock === 0"
                (click)="selectProduct(2, product)"
              >
              </p-button>
            </td>
          </tr>
        </ng-template>
      </p-table>
      <div class="result-section-snacks">
        <h2>Cambio: {{ machineService.getChange(2) | currency : 'EUR' }}</h2>

        @if (machineService.getChange(2) > 0) {
        <p-button (click)="returnMoney(2)" label="Recojer" severity="success" />
        }
      </div>
      <div class="col-6">
        @if (getProductsCollectById(2).length > 0) {
        <p-table [value]="getProductsCollectById(2)">
          <ng-template #header>
            <tr>
              <th>Producto</th>
              <th>Cantidad</th>
            </tr>
          </ng-template>
          <ng-template #body let-product>
            <tr>
              <td>{{ product.name }}</td>
              <td>{{ product.amount }}</td>
            </tr>
          </ng-template>
        </p-table>
        <p-button (click)="collectProduct(2)" label="Recojer" severity="success" />
        }
      </div>
    </div>
  </div>
</div>
